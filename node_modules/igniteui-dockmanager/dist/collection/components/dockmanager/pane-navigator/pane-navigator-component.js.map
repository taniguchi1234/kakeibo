{"version":3,"file":"pane-navigator-component.js","sourceRoot":"","sources":["../../../../src/components/dockmanager/pane-navigator/pane-navigator-component.tsx"],"names":[],"mappings":"AAAA,OAAO,EAAE,SAAS,EAAE,KAAK,EAAgB,IAAI,EAAE,MAAM,EAAE,IAAI,EAAE,CAAC,EAAE,MAAM,eAAe,CAAC;AAEtF,OAAO,EAAE,KAAK,EAAE,MAAM,sBAAsB,CAAC;AAG7C;;GAEG;AAMH,MAAM,OAAO,yBAAyB;;;;;;;;EAcpC,gBAAgB;IACd,MAAM,YAAY,GAAG,IAAI,CAAC,eAAe,CAAC,IAAI,CAAC,aAAa,CAAC,CAAC;IAC9D,MAAM,gBAAgB,GAAG,YAAY,CAAC,qBAAqB,EAAE,CAAC;IAC9D,MAAM,kBAAkB,GAAG,YAAY,CAAC,aAAa,CAAC,qBAAqB,EAAE,CAAC;IAE9E,IAAI,gBAAgB,CAAC,GAAG,GAAG,kBAAkB,CAAC,GAAG,EAAE;MACjD,IAAI,CAAC,eAAe,CAAC,IAAI,CAAC,aAAa,CAAC,CAAC,aAAa,CAAC,SAAS,IAAI,kBAAkB,CAAC,GAAG,GAAG,gBAAgB,CAAC,GAAG,CAAC;KACnH;IACD,IAAI,gBAAgB,CAAC,MAAM,GAAG,kBAAkB,CAAC,MAAM,EAAE;MACvD,IAAI,CAAC,eAAe,CAAC,IAAI,CAAC,aAAa,CAAC,CAAC,aAAa,CAAC,SAAS,IAAI,gBAAgB,CAAC,MAAM,GAAG,kBAAkB,CAAC,MAAM,CAAC;KACzH;EACH,CAAC;EAGD,WAAW,CAAC,KAAoB;IAC9B,IAAI,KAAK,CAAC,IAAI,KAAK,SAAS,IAAI,KAAK,CAAC,IAAI,KAAK,UAAU,IAAI,KAAK,CAAC,GAAG,KAAK,SAAS,IAAI,KAAK,CAAC,GAAG,KAAK,IAAI,IAAI,KAAK,CAAC,GAAG,KAAK,MAAM,EAAE;MAClI,IAAI,CAAC,MAAM,CAAC,IAAI,CAAC,IAAI,CAAC,QAAQ,CAAC,IAAI,CAAC,aAAa,CAAC,CAAC,CAAC;KACrD;EACH,CAAC;EAGD,aAAa,CAAC,KAAoB;IAChC,KAAK,CAAC,eAAe,EAAE,CAAC;IACxB,MAAM,cAAc,GAAG,KAAK,CAAC,QAAQ,CAAC;IACtC,IAAI,KAAK,CAAC;IAEV,IAAI,KAAK,CAAC,sBAAsB,CAAC,KAAK,CAAC,IAAI,CAAC,KAAK,CAAC,MAAM,EAAE;MACxD,QAAQ,KAAK,CAAC,GAAG,EAAE;QACjB,KAAK,SAAS;UACZ,IAAI,CAAC,qBAAqB,EAAE,CAAC;UAC7B,MAAM;QACR,KAAK,WAAW;UACd,IAAI,CAAC,qBAAqB,EAAE,CAAC;UAC7B,MAAM;QACR,KAAK,YAAY,CAAC;QAClB,KAAK,WAAW,CAAC,CAAC;UAChB,IAAI,IAAI,CAAC,WAAW,CAAC,MAAM,KAAK,CAAC,IAAI,IAAI,CAAC,eAAe,CAAC,MAAM,KAAK,CAAC,EAAE;YACtE,OAAO;WACR;UACD,IAAI,IAAI,CAAC,aAAa,IAAI,CAAC,IAAI,IAAI,CAAC,aAAa,GAAG,IAAI,CAAC,WAAW,CAAC,MAAM,EAAE;YAC3E,KAAK,GAAG,IAAI,CAAC,aAAa,GAAG,IAAI,CAAC,WAAW,CAAC,MAAM,CAAC;YACrD,IAAI,CAAC,eAAe,CAAC,KAAK,IAAI,IAAI,CAAC,QAAQ,CAAC,MAAM,CAAC,CAAC,CAAC,IAAI,CAAC,QAAQ,CAAC,MAAM,GAAG,CAAC,CAAC,CAAC,CAAC,KAAK,EAAE,MAAM,CAAC,CAAC;WAChG;eAAM,IAAI,IAAI,CAAC,aAAa,IAAI,IAAI,CAAC,WAAW,CAAC,MAAM,IAAI,IAAI,CAAC,aAAa,GAAG,IAAI,CAAC,QAAQ,CAAC,MAAM,EAAE;YACrG,KAAK,GAAG,IAAI,CAAC,aAAa,GAAG,IAAI,CAAC,WAAW,CAAC,MAAM,CAAC;YACrD,IAAI,CAAC,eAAe,CAAC,KAAK,GAAG,IAAI,CAAC,WAAW,CAAC,MAAM,GAAG,CAAC,CAAC,CAAC,CAAC,IAAI,CAAC,WAAW,CAAC,MAAM,GAAG,CAAC,CAAC,CAAC,CAAC,KAAK,EAAE,UAAU,CAAC,CAAC;WAC7G;SACF;OACF;KACF;IAED,IAAI,KAAK,CAAC,GAAG,KAAK,IAAI,IAAI,KAAK,CAAC,GAAG,KAAK,IAAI,EAAE;MAC5C,IAAI,cAAc,EAAE;QAClB,IAAI,CAAC,qBAAqB,EAAE,CAAC;OAC9B;WAAM;QACL,IAAI,CAAC,qBAAqB,EAAE,CAAC;OAC9B;KACF;IAED,IAAI,CAAC,gBAAgB,EAAE,CAAC;EAC1B,CAAC;EAEO,eAAe,CAAC,KAAa,EAAE,SAA8B;IACnE,IAAI,KAAK,KAAK,CAAC,CAAC,EAAE;MAChB,KAAK,GAAG,IAAI,CAAC,QAAQ,CAAC,MAAM,GAAG,CAAC,CAAC;KAClC;SAAM,IAAI,KAAK,KAAK,IAAI,CAAC,QAAQ,CAAC,MAAM,EAAE;MACzC,KAAK,GAAG,CAAC,CAAC;KACX;IAED,IAAI,OAAO,GAAG,CAAC,CAAC;IAEhB,OAAO,IAAI,CAAC,QAAQ,CAAC,KAAK,CAAC,CAAC,QAAQ,IAAI,OAAO,IAAI,IAAI,CAAC,QAAQ,CAAC,MAAM,EAAE;MACvE,OAAO,EAAE,CAAC;MACV,KAAK,GAAG,KAAK,GAAG,CAAC,SAAS,KAAK,MAAM,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC;MAEhD,IAAI,KAAK,KAAK,CAAC,CAAC,EAAE;QAChB,KAAK,GAAG,IAAI,CAAC,QAAQ,CAAC,MAAM,GAAG,CAAC,CAAC;OAClC;WAAM,IAAI,KAAK,KAAK,IAAI,CAAC,QAAQ,CAAC,MAAM,EAAE;QACzC,KAAK,GAAG,CAAC,CAAC;OACX;KACF;IAED,IAAI,CAAC,aAAa,GAAG,KAAK,CAAC;EAC7B,CAAC;EAEO,qBAAqB,CAAC,MAAM,GAAG,CAAC;IACtC,MAAM,QAAQ,GAAG,IAAI,CAAC,aAAa,GAAG,MAAM,CAAC;IAC7C,IAAI,CAAC,eAAe,CAAC,QAAQ,EAAE,MAAM,CAAC,CAAC;EACzC,CAAC;EAEO,qBAAqB,CAAC,MAAM,GAAG,CAAC;IACtC,MAAM,QAAQ,GAAG,IAAI,CAAC,aAAa,GAAG,MAAM,CAAC;IAC7C,IAAI,CAAC,eAAe,CAAC,QAAQ,EAAE,UAAU,CAAC,CAAC;EAC7C,CAAC;EAED,iBAAiB;IACf,IAAI,CAAC,QAAQ,GAAG,CAAC,GAAG,IAAI,CAAC,WAAW,EAAE,GAAG,IAAI,CAAC,eAAe,CAAC,CAAC;EACjE,CAAC;EAED,gBAAgB;IACd,IAAI,CAAC,OAAO,CAAC,KAAK,EAAE,CAAC;IACrB,IAAI,CAAC,eAAe,GAAG,KAAK,CAAC,IAAI,CAAc,IAAI,CAAC,OAAO,CAAC,gBAAgB,CAAC,cAAc,CAAC,CAAC,CAAC;IAC9F,IAAI,CAAC,eAAe,CAAC,IAAI,CAAC,aAAa,EAAE,MAAM,CAAC,CAAC;IACjD,IAAI,CAAC,gBAAgB,EAAE,CAAC;EAC1B,CAAC;EAED,eAAe,CAAC,IAAoB,EAAE,KAAa,EAAE,SAAkB;IACrE,MAAM,IAAI,GAAG,KAAK,CAAC,WAAW,CAAC;MAC7B,IAAI,EAAE,IAAI;MACV,QAAQ,EAAE,SAAS,CAAC,CAAC,CAAC,KAAK,KAAK,IAAI,CAAC,aAAa,GAAG,IAAI,CAAC,WAAW,CAAC,MAAM,CAAC,CAAC,CAAC,KAAK,KAAK,IAAI,CAAC,aAAa;MAC3G,QAAQ,EAAE,IAAI,CAAC,QAAQ;KACxB,CAAC,CAAC;IAEH,OAAO,IAAI,CAAC;EACd,CAAC;EAED,UAAU,CAAC,KAAa,EAAE,SAAkB;IAC1C,IAAI,CAAC,aAAa,GAAG,CAAC,SAAS,CAAC,CAAC,CAAC,KAAK,CAAC,CAAC,CAAC,IAAI,CAAC,WAAW,CAAC,MAAM,GAAG,KAAK,CAAC;EAC5E,CAAC;EAED,WAAW,CAAC,KAAa,EAAE,KAAuB,EAAE,SAAkB;IACpE,OAAO,CACL,eAAS,IAAI,EAAC,OAAO,EAAC,KAAK,EAAC,OAAO;MACjC,UAAI,IAAI,EAAC,OAAO,EAAC,KAAK,EAAC,OAAO,IAAE,KAAK,CAAM;MAC3C,eAAS,KAAK,EAAC,OAAO,IACnB,KAAK,aAAL,KAAK,uBAAL,KAAK,CAAE,GAAG,CAAC,CAAC,IAAS,EAAE,KAAK,EAAE,EAAE;QAC/B,OAAO,CACL,WACE,IAAI,EAAE,IAAI,CAAC,eAAe,CAAC,IAAI,EAAE,KAAK,EAAE,SAAS,CAAC,EAClD,WAAW,EAAE,GAAG,EAAE,CAAC,IAAI,CAAC,UAAU,CAAC,KAAK,EAAE,SAAS,CAAC,EACpD,SAAS,EAAE,GAAG,EAAE,CAAC,IAAI,CAAC,MAAM,CAAC,IAAI,CAAC,IAAI,CAAC,QAAQ,CAAC,IAAI,CAAC,aAAa,CAAC,CAAC,IAEnE,IAAI,CAAC,MAAM,CACR,CACP,CAAC;MACJ,CAAC,CAAC,CACM,CACF,CACX,CAAC;EACJ,CAAC;EAED,MAAM;;IACJ,OAAO,CACL,EAAC,IAAI,IACH,OAAO,EAAE,GAAG,EAAE,CAAC,IAAI,CAAC,MAAM,CAAC,IAAI,CAAC,IAAI,CAAC,QAAQ,CAAC,IAAI,CAAC,uBAAuB,CAAC,CAAC,EAC5E,WAAW,EAAC,mOAC2H;MAEvI,eACE,IAAI,EAAC,MAAM,EACX,KAAK,EAAC,gBAAgB,EACtB,GAAG,EAAE,EAAE,CAAC,EAAE,CAAC,IAAI,CAAC,OAAO,GAAG,EAAE,EAC5B,QAAQ,EAAE,CAAC,EACX,OAAO,EAAE,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,eAAe,EAAE;QAEnC,cAAQ,IAAI,EAAC,QAAQ;UACjB,cAAK,MAAA,IAAI,CAAC,QAAQ,CAAC,IAAI,CAAC,aAAa,CAAC,0CAAE,MAAM,CAAM,CAC/C;QACT,eAAS,IAAI,EAAC,MAAM,EAAC,KAAK,EAAC,MAAM;UAC5B,IAAI,CAAC,WAAW,CAAC,IAAI,CAAC,eAAe,CAAC,KAAK,EAAE,IAAI,CAAC,WAAW,EAAE,KAAK,CAAC;UACrE,IAAI,CAAC,WAAW,CAAC,IAAI,CAAC,eAAe,CAAC,SAAS,EAAE,IAAI,CAAC,eAAe,EAAE,IAAI,CAAC,CACvE,CACF,CACJ,CACT,CAAC;EACJ,CAAC;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;CACF","sourcesContent":["import { Component, Event, EventEmitter, Host, Listen, Prop, h } from '@stencil/core';\r\n\r\nimport { Utils } from '../../../utils/utils';\r\nimport { IgcContentPane, IgcDockManagerResourceStrings } from '../dockmanager.public-interfaces';\r\n\r\n/**\r\n * @hidden\r\n */\r\n@Component({\r\n  tag: 'igc-pane-navigator-component',\r\n  styleUrl: 'pane-navigator-component.scss',\r\n  shadow: true\r\n})\r\nexport class IgcPaneNavigatorComponent {\r\n\r\n  @Prop() activeDocuments: IgcContentPane[];\r\n  @Prop() activePanes: IgcContentPane[];\r\n  @Prop({ mutable: true }) selectedIndex: number;\r\n  @Prop() previousActivePaneIndex: number;\r\n  @Prop() resourceStrings: IgcDockManagerResourceStrings;\r\n\r\n  @Event() closed: EventEmitter<IgcContentPane>;\r\n\r\n  private allItems: IgcContentPane[];\r\n  private allItemsElement: HTMLElement[];\r\n  private paneNav: HTMLElement;\r\n\r\n  scrollItemToView() {\r\n    const selectedItem = this.allItemsElement[this.selectedIndex];\r\n    const selectedItemRect = selectedItem.getBoundingClientRect();\r\n    const itemsContainerRect = selectedItem.parentElement.getBoundingClientRect();\r\n\r\n    if (selectedItemRect.top < itemsContainerRect.top) {\r\n      this.allItemsElement[this.selectedIndex].parentElement.scrollTop -= itemsContainerRect.top - selectedItemRect.top;\r\n    }\r\n    if (selectedItemRect.bottom > itemsContainerRect.bottom) {\r\n      this.allItemsElement[this.selectedIndex].parentElement.scrollTop += selectedItemRect.bottom - itemsContainerRect.bottom;\r\n    }\r\n  }\r\n\r\n  @Listen('keyup')\r\n  handleKeyUp(event: KeyboardEvent) {\r\n    if (event.code === 'AltLeft' || event.code === 'AltRight' || event.key === 'Control' || event.key === 'OS' || event.key === 'Meta') {\r\n      this.closed.emit(this.allItems[this.selectedIndex]);\r\n    }\r\n  }\r\n\r\n  @Listen('keydown')\r\n  handleKeydown(event: KeyboardEvent) {\r\n    event.stopPropagation();\r\n    const isShiftPressed = event.shiftKey;\r\n    let index;\r\n\r\n    if (Utils.isControlOrMetaPressed(event) && !event.altKey) {\r\n      switch (event.key) {\r\n        case 'ArrowUp':\r\n          this.decreaseSelectedIndex();\r\n          break;\r\n        case 'ArrowDown':\r\n          this.increaseSelectedIndex();\r\n          break;\r\n        case 'ArrowRight':\r\n        case 'ArrowLeft': {\r\n          if (this.activePanes.length === 0 || this.activeDocuments.length === 0) {\r\n            return;\r\n          }\r\n          if (this.selectedIndex >= 0 && this.selectedIndex < this.activePanes.length) {\r\n            index = this.selectedIndex + this.activePanes.length;\r\n            this.navigateToIndex(index >= this.allItems.length ? this.allItems.length - 1 : index, 'next');\r\n          } else if (this.selectedIndex >= this.activePanes.length && this.selectedIndex < this.allItems.length) {\r\n            index = this.selectedIndex - this.activePanes.length;\r\n            this.navigateToIndex(index > this.activePanes.length - 1 ? this.activePanes.length - 1 : index, 'previous');\r\n          }\r\n        }\r\n      }\r\n    }\r\n\r\n    if (event.key === 'F7' || event.key === 'F8') {\r\n      if (isShiftPressed) {\r\n        this.decreaseSelectedIndex();\r\n      } else {\r\n        this.increaseSelectedIndex();\r\n      }\r\n    }\r\n\r\n    this.scrollItemToView();\r\n  }\r\n\r\n  private navigateToIndex(index: number, direction: 'next' | 'previous') {\r\n    if (index === -1) {\r\n      index = this.allItems.length - 1;\r\n    } else if (index === this.allItems.length) {\r\n      index = 0;\r\n    }\r\n\r\n    let counter = 0;\r\n\r\n    while (this.allItems[index].disabled && counter <= this.allItems.length) {\r\n      counter++;\r\n      index = index + (direction === 'next' ? 1 : -1);\r\n\r\n      if (index === -1) {\r\n        index = this.allItems.length - 1;\r\n      } else if (index === this.allItems.length) {\r\n        index = 0;\r\n      }\r\n    }\r\n\r\n    this.selectedIndex = index;\r\n  }\r\n\r\n  private increaseSelectedIndex(amount = 1) {\r\n    const newValue = this.selectedIndex + amount;\r\n    this.navigateToIndex(newValue, 'next');\r\n  }\r\n\r\n  private decreaseSelectedIndex(amount = 1) {\r\n    const newValue = this.selectedIndex - amount;\r\n    this.navigateToIndex(newValue, 'previous');\r\n  }\r\n\r\n  connectedCallback() {\r\n    this.allItems = [...this.activePanes, ...this.activeDocuments];\r\n  }\r\n\r\n  componentDidLoad() {\r\n    this.paneNav.focus();\r\n    this.allItemsElement = Array.from<HTMLElement>(this.paneNav.querySelectorAll('[part~=item]'));\r\n    this.navigateToIndex(this.selectedIndex, 'next');\r\n    this.scrollItemToView();\r\n  }\r\n\r\n  resolveItemPart(item: IgcContentPane, index: number, isDocHost: boolean) {\r\n    const part = Utils.partNameMap({\r\n      item: true,\r\n      selected: isDocHost ? index === this.selectedIndex - this.activePanes.length : index === this.selectedIndex,\r\n      disabled: item.disabled\r\n    });\r\n\r\n    return part;\r\n  }\r\n\r\n  selectItem(index: number, isDocHost: boolean): void {\r\n    this.selectedIndex = !isDocHost ? index : this.activePanes.length + index;\r\n  }\r\n\r\n  renderItems(title: string, items: IgcContentPane[], isDocHost: boolean) {\r\n    return (\r\n      <article part=\"group\" class=\"group\">\r\n        <h4 part=\"title\" class=\"title\">{title}</h4>\r\n        <section class=\"items\">\r\n          {items?.map((item: any, index) => {\r\n            return (\r\n              <div\r\n                part={this.resolveItemPart(item, index, isDocHost)}\r\n                onMouseDown={() => this.selectItem(index, isDocHost)}\r\n                onMouseUp={() => this.closed.emit(this.allItems[this.selectedIndex])}\r\n              >\r\n                {item.header}\r\n              </div>\r\n            );\r\n          })}\r\n        </section>\r\n      </article>\r\n    );\r\n  }\r\n\r\n  render() {\r\n    return (\r\n      <Host\r\n        onClick={() => this.closed.emit(this.allItems[this.previousActivePaneIndex])}\r\n        exportparts=\"base: pane-navigator, header: pane-navigator-header, body: pane-navigator-body,\r\n                     group: pane-navigator-items-group, title: pane-navigator-items-group-title, item: pane-navigator-item, selected, disabled\"\r\n      >\r\n        <article\r\n          part=\"base\"\r\n          class=\"pane-navigator\"\r\n          ref={el => this.paneNav = el}\r\n          tabIndex={0}\r\n          onClick={ev => ev.stopPropagation()}\r\n        >\r\n          <header part=\"header\">\r\n              <h3>{this.allItems[this.selectedIndex]?.header}</h3>\r\n          </header>\r\n          <section part=\"body\" class=\"body\">\r\n              {this.renderItems(this.resourceStrings.panes, this.activePanes, false)}\r\n              {this.renderItems(this.resourceStrings.documents, this.activeDocuments, true)}\r\n          </section>\r\n        </article>\r\n      </Host >\r\n    );\r\n  }\r\n}\r\n"]}