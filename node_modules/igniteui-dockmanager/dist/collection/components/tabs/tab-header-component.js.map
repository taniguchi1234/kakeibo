{"version":3,"file":"tab-header-component.js","sourceRoot":"","sources":["../../../src/components/tabs/tab-header-component.tsx"],"names":[],"mappings":"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","sourcesContent":["import { Component, Element, Event, EventEmitter, Host, Listen, Prop, Watch, h } from '@stencil/core';\r\n\r\nimport { Utils } from '../../utils/utils';\r\nimport { IgcTabHeadersPosition } from '../dockmanager/dockmanager.interfaces';\r\nimport { IgcDockManagerResourceStrings } from '../dockmanager/dockmanager.public-interfaces';\r\nimport { IGNORE_DRAG, IgcDragEventArguments, IgcDragMoveEventArguments, IgcDragService, IgcDragStartEventArguments } from '../drag-drop/drag.service';\r\n\r\n/**\r\n * @hidden\r\n */\r\n@Component({\r\n  tag: 'igc-tab-header-component',\r\n  styleUrl: 'tab-header-component.scss',\r\n  shadow: true,\r\n  scoped: false\r\n})\r\nexport class IgcTabHeaderComponent {\r\n  @Prop({ mutable: true }) dragService: IgcDragService;\r\n\r\n  @Element() element: HTMLIgcTabHeaderComponentElement;\r\n\r\n  @Prop() selected = false;\r\n  @Prop() hovered = false;\r\n  @Prop() position = IgcTabHeadersPosition.top;\r\n  @Prop() iconName: string;\r\n  @Prop() header: string;\r\n  @Prop() isActive: boolean;\r\n  @Prop() resourceStrings: IgcDockManagerResourceStrings;\r\n  @Prop() forcedDrag: boolean;\r\n  @Prop() disabled = false;\r\n  @Prop() showHeaderIconOnHover: 'closeOnly' | 'moreOptionsOnly' | 'all';\r\n\r\n  @Event() dragStarted: EventEmitter<IgcDragStartEventArguments>;\r\n  @Event() dragMoved: EventEmitter<IgcDragMoveEventArguments>;\r\n  @Event() dragEnded: EventEmitter<IgcDragEventArguments>;\r\n  @Event() tabMouseDown: EventEmitter;\r\n  @Event() iconClicked: EventEmitter<any>;\r\n  @Event() iconKeyDown: EventEmitter<KeyboardEvent>;\r\n  @Event() elementConnected: EventEmitter<HTMLIgcTabHeaderComponentElement>;\r\n  @Event() elementDisconnected: EventEmitter<HTMLIgcTabHeaderComponentElement>;\r\n\r\n  connectedCallback() {\r\n    this.dragService = new IgcDragService(this.element);\r\n\r\n    this.dragService.dragStart = args => {\r\n      this.dragStarted.emit(args);\r\n    };\r\n    this.dragService.dragMove = args => {\r\n      this.dragMoved.emit(args);\r\n    };\r\n    this.dragService.dragEnd = args => {\r\n      this.dragEnded.emit(args);\r\n    };\r\n\r\n    this.forceDragging();\r\n    this.elementConnected.emit(this.element);\r\n  }\r\n\r\n  disconnectedCallback() {\r\n    if (this.dragService) {\r\n      this.dragService.destroy();\r\n    }\r\n    this.elementDisconnected.emit(this.element);\r\n  }\r\n\r\n  @Listen('mousedown')\r\n  handleMouseDown(ev: MouseEvent) {\r\n    const iconSlot = this.element.shadowRoot.querySelector('div[part*=\"tab-header-more-options\"]');\r\n    const isIconClicked = ev.composedPath().filter(p => p === iconSlot).length > 0;\r\n    this.tabMouseDown.emit({ showHeaderIconOnHover: this.showHeaderIconOnHover, isIconClicked });\r\n  }\r\n\r\n  @Listen('mouseenter')\r\n  handleMouseEnter() {\r\n    this.hovered = true;\r\n  }\r\n\r\n  @Listen('mouseleave')\r\n  handleMouseLeave() {\r\n    this.hovered = false;\r\n  }\r\n\r\n  @Watch('forcedDrag')\r\n  forcedDragChanged() {\r\n    this.forceDragging();\r\n  }\r\n\r\n  private forceDragging() {\r\n    if (this.forcedDrag) {\r\n      this.dragService.forceDragging();\r\n    }\r\n  }\r\n\r\n  @Watch('isActive')\r\n  @Watch('selected')\r\n  @Watch('hovered')\r\n  activeChanged() {\r\n    const queryButton = 'tab-header-close-button';\r\n    const button = this.element.querySelector(`[part^=${queryButton}]`);\r\n    const parts = Utils.partNameMap({\r\n      [queryButton]: true,\r\n      active: this.isActive,\r\n      selected: this.selected,\r\n      hovered: this.hovered\r\n    });\r\n\r\n    button?.setAttribute('part', parts);\r\n  }\r\n\r\n  private iconClick = (ev: MouseEvent) => {\r\n    this.iconClicked.emit(ev);\r\n  }\r\n\r\n  private keyDown = (ev: KeyboardEvent) => {\r\n    this.iconKeyDown.emit(ev);\r\n  }\r\n\r\n  private renderCloseButton() {\r\n    const showHeaderIconOnHover = this.showHeaderIconOnHover && (this.showHeaderIconOnHover === 'closeOnly' || this.showHeaderIconOnHover === 'all');\r\n    const shouldShowButton = this.selected || showHeaderIconOnHover;\r\n    const pointerEvents = (this.selected && !this.disabled) || this.showHeaderIconOnHover ? 'all' : 'none';\r\n\r\n    return (\r\n      shouldShowButton && <slot name=\"tabHeaderCloseButton\" >\r\n        <igc-button-component\r\n          part=\"tab-header-close-button\"\r\n          style={{\r\n            pointerEvents\r\n          }}\r\n        >\r\n          <igc-icon-component\r\n            name={this.iconName}\r\n            aria-label={this.resourceStrings.close}\r\n            title={this.resourceStrings.close}\r\n          />\r\n        </igc-button-component>\r\n      </slot>\r\n    );\r\n  }\r\n\r\n  private renderMoreOptionsButton() {\r\n    const showHeaderIconOnHover = this.showHeaderIconOnHover && (this.showHeaderIconOnHover === 'moreOptionsOnly' || this.showHeaderIconOnHover === 'all');\r\n    const shouldShowButton = this.selected || showHeaderIconOnHover;\r\n    const pointerEvents = (this.selected && !this.disabled) || this.showHeaderIconOnHover ? 'all' : 'none';\r\n\r\n    return (\r\n      shouldShowButton && <slot name=\"tabHeaderMoreOptionsButton\">\r\n        <igc-button-component\r\n          part=\"tab-header-more-options-button\"\r\n          style={{\r\n            pointerEvents\r\n          }}\r\n        >\r\n          <igc-icon-component\r\n            name={this.iconName}\r\n            aria-label={this.resourceStrings.moreOptions}\r\n            title={this.resourceStrings.moreOptions}\r\n          />\r\n        </igc-button-component>\r\n      </slot>\r\n    );\r\n  }\r\n\r\n  render() {\r\n    const showCloseOnHover = this.iconName === 'close' && this.showHeaderIconOnHover && (this.showHeaderIconOnHover === 'closeOnly' || this.showHeaderIconOnHover === 'all');\r\n    const showMoreOptionsOnHover = this.iconName !== 'close' && this.showHeaderIconOnHover && (this.showHeaderIconOnHover === 'moreOptionsOnly' || this.showHeaderIconOnHover === 'all');\r\n\r\n    const parts = Utils.partNameMap({\r\n      'tab-header': true,\r\n      top: this.position === IgcTabHeadersPosition.top,\r\n      active: this.isActive,\r\n      selected: this.selected,\r\n      disabled: this.disabled,\r\n      'hover-preview-close': showCloseOnHover,\r\n      'hover-preview-options': showMoreOptionsOnHover,\r\n      bottom: this.position === IgcTabHeadersPosition.bottom,\r\n    });\r\n\r\n    const tabParts = Utils.partNameMap({\r\n      'tab-header-more-options': true,\r\n      'floating': !this.selected && (showCloseOnHover || showMoreOptionsOnHover),\r\n      'selected': this.selected\r\n    });\r\n\r\n    const exportparts = Utils.partNameMap({\r\n      'tab-header-close-button': true,\r\n      'tab-header-more-options': true,\r\n      'tab-header-more-options-button': true,\r\n      'floating': true,\r\n      'selected': true,\r\n      'active': true\r\n    }, ',');\r\n\r\n    return (\r\n      <Host\r\n        role=\"tab\"\r\n        part={parts}\r\n        exportparts={exportparts}\r\n        aria-label={this.header}\r\n        aria-selected={this.selected ? 'true' : 'false'}\r\n        aria-disabled={this.disabled ? 'true' : 'false'}\r\n        tabIndex={!this.selected || this.disabled ? -1 : 0}\r\n      >\r\n        <slot></slot>\r\n        {\r\n          this.iconName &&\r\n          <div part={tabParts} onClick={this.iconClick} onKeyDown={this.keyDown} {...{ [IGNORE_DRAG]: true }}>\r\n            {this.iconName === 'close' ? this.renderCloseButton() : this.renderMoreOptionsButton()}\r\n          </div>\r\n        }\r\n      </Host>);\r\n  }\r\n}\r\n"]}